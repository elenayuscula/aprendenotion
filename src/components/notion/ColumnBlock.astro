---
import type { BlockObjectResponse } from '@notionhq/client/build/src/api-endpoints';
import NotionRenderer from './NotionRenderer.astro';

interface Props {
  block: BlockObjectResponse;
}

const { block } = Astro.props;
const columns = ((block as any).children || []) as BlockObjectResponse[];
---

<div class="notion-columns" style={`--col-count: ${columns.length}`}>
  {columns.map((column) => {
    const columnChildren = (column as any).children as BlockObjectResponse[] | undefined;
    return (
      <div class="notion-column">
        {columnChildren && <NotionRenderer blocks={columnChildren} />}
      </div>
    );
  })}
</div>

<style>
  .notion-columns {
    display: grid;
    grid-template-columns: repeat(var(--col-count, 2), 1fr);
    gap: 1.5em;
    margin: 0.75em 0;
  }
  @media (max-width: 640px) {
    .notion-columns {
      grid-template-columns: 1fr;
    }
  }
</style>
