---
import type { BlockObjectResponse } from '@notionhq/client/build/src/api-endpoints';
import RichText from './RichText.astro';
import NotionRenderer from './NotionRenderer.astro';

interface Props {
  block: BlockObjectResponse;
}

const { block } = Astro.props;
const paragraph = (block as any).paragraph;
const children = (block as any).children as BlockObjectResponse[] | undefined;
const isEmpty = paragraph.rich_text.length === 0;
---

{isEmpty ? (
  <div class="notion-blank">&nbsp;</div>
) : (
  <p class="notion-paragraph">
    <RichText text={paragraph.rich_text} />
  </p>
)}

{children && children.length > 0 && (
  <div class="notion-indent">
    <NotionRenderer blocks={children} />
  </div>
)}

<style>
  .notion-paragraph {
    margin: 0.25em 0;
    line-height: 1.75;
  }
  .notion-blank {
    height: 1em;
  }
  .notion-indent {
    padding-left: 1.5em;
  }
</style>
