---
import LessonLayout from '../layouts/LessonLayout.astro';

const toc = [
  { label: 'Anidar inputs, operadores y funciones', href: '#anidar' },
  { label: 'Condiciones anidadas', href: '#condiciones-anidadas' },
];
---

<LessonLayout
  title="5.02. Expresiones y condiciones anidadas ‚Äî Aprende Notion"
  description="Aprende a anidar expresiones, operadores, funciones y condiciones en las f√≥rmulas de Notion."
  emoji="‚ûó"
  lessonTitle="5.02. Expresiones y condiciones anidadas"
  prevLink={{ href: '/introduccion-formulas', label: '5.01. Introducci√≥n a las F√≥rmulas en Notion' }}
  nextLink={{ href: '/input-values', label: '5.03. Bola extra: Tipos de valores en las f√≥rmulas' }}
  toc={toc}
>
  <div class="video-embed">
    <iframe src="https://www.youtube.com/embed/kx8Ciyu7jzk" title="Expresiones y condiciones anidadas en Notion" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
  </div>

  <h2 id="anidar">Anidar inputs, operadores y funciones</h2>
  <p>Es muy normal que en nuestras f√≥rmulas usemos <strong>funciones</strong>, <strong>operadores</strong> e <strong>input values</strong> dentro de otras funciones. Esto se conoce como anidado o <strong>nesting</strong>.</p>
  <p>Cuando combinamos inputs, operadores y/o funciones de manera que devuelvan un s√≥lo valor, se conoce como <strong>expresi√≥n</strong>. Las expresiones pueden ser tan sencillas o complejas como queramos, siempre y cuando devuelvan un s√≥lo valor.</p>
  <p>Esto implica que los argumentos de una funci√≥n no tienen por qu√© ser s√≥lo una referencia a una propiedad o un valor literal; <strong>cualquier expresi√≥n puede ser a su vez un argumento</strong> siempre y cuando devuelva un valor √∫nico y √©ste sea del tipo correcto.</p>

  <p>Por ejemplo, la sencilla f√≥rmula <code>add(100, 20)</code> nos devolver√° el resultado de sumar 100 y 20.</p>
  <p>Pero podr√≠amos convertirla en una expresi√≥n m√°s complicada:</p>
  <p><code>add(100, multiply(10, 2))</code></p>
  <p>En este caso, el segundo argumento es el resultado de una funci√≥n <code>multiply()</code> a la que hemos pasado como argumentos <code>10</code> y <code>2</code>. Ambas operaciones dar√°n como resultado: <code>120</code>.</p>

  <p>Un ejemplo algo m√°s complicado, introduciendo como valores las referencias a otras propiedades:</p>
  <p>Si quisi√©ramos calcular el precio total de un item aplic√°ndole un IVA diferente:</p>
  <p><code>add(prop("Precio"), multiply(prop("Precio"), prop("IVA")))</code></p>
  <p>Primero, multiplicar√≠amos el Precio por el IVA ‚Üí <code>multiply(prop("Precio"), prop("IVA"))</code></p>
  <p>Y ese resultado lo sumar√≠amos al Precio ‚Üí <code>  <img src="/images/leccion-05/avanzadas/precio-con-iva.webp" alt="Anidar inputs, operadores y funciones en f√≥rmulas de Notion" />

  <h2 id="condiciones-anidadas">Condiciones anidadas</h2>
  <p>El fen√≥meno de anidado lo encontraremos sobre todo con las funciones de tipo <code>if()</code>. Es decir, las funciones que nos sirven para comprobar si se cumple una condici√≥n o no:</p>
  <p><code>if(2 == 1, "Igual", "No es igual")</code> ‚Üí <code>"No es igual"</code></p>

  <p>Un uso muy com√∫n ser√≠a el de marcar como check una propiedad si esta se encuentra en estado "Completado":</p>
  <p><code>if(prop("Status") == "completada", true, false)</code></p>

  <img src="/images/leccion-05/avanzadas/tareas-completadas.webp" alt="Condici√≥n para marcar tareas completadas en Notion" />

  <p>Tambi√©n podemos usar las funciones <code>and()</code> y <code>or()</code> para comprobar dos expresiones diferentes:</p>
  <p><code>if(and(prop("Pagado"), prop("Enviado")), "Completado", "En Progreso")</code></p>
  <p>En esta f√≥rmula estamos comprobando si un producto est√° tanto "Pagado" como "Enviado", en cuyo caso aparecer√≠a como "Completado". En caso contrario, "En progreso".</p>

  <p>Por √∫ltimo, es posible que queramos mayor granularidad que un true o false. Podemos anidar condiciones:</p>
  <p><code>if(prop("Mood") == "feliz", "üòÄ", if(prop("Mood") == "ap√°tico", "üòï", "üò©"))</code></p>

  <p>Esto se traducir√≠a en:</p>
  <ul>
    <li>Si "Mood" es "feliz", muestra "üòÄ"</li>
    <li>Si lo anterior no se cumple, si "Mood" es "ap√°tico", muestra "üòï"</li>
    <li>Si no se cumple ninguna de las anteriores, muestra "üò©"</li>
  </ul>

  <img src="/images/leccion-05/avanzadas/estado-final.webp" alt="Estado final de condiciones anidadas en Notion" />
  <img src="/images/leccion-05/avanzadas/moods.webp" alt="Condiciones anidadas con emojis en Notion" />
</LessonLayout>
