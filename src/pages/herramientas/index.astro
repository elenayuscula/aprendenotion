---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const products = await getCollection('herramientas');
---

<BaseLayout
  title="Herramientas — Aprende Notion"
  description="Herramientas y sistemas construidos en Notion para mejorar tu productividad. Plantillas funcionales con fórmulas, filtros y guías paso a paso."
>
  <div class="page-wrapper page-wrapper--wide">

    <!-- Hero -->
    <section class="store-hero">
      <span class="store-hero__label">HERRAMIENTAS</span>
      <h1 class="store-hero__title">¿Buscas una herramienta ya construida?</h1>
      <p class="store-hero__subtitle">
        <em>Tiny is Mighty.</em> La otra manera que tengo de volcar mis ideas en un formato accesible para todo el mundo es hacerlo en forma de herramientas que recogen mi manera particular de hacer ciertas cosas.
      </p>
    </section>

    <!-- Products Grid — 3 columns -->
    <section class="store-grid" aria-label="Herramientas disponibles">
      {products.map((product) => (
        <a href={`/herramientas/${product.id}`} class="store-card">
          <div class="store-card__image">
            <img src={product.data.image} alt={product.data.title} width="360" height="252" loading="lazy" />
          </div>
          <div class="store-card__body">
            <span class={`store-card__tag store-card__tag--${product.data.tagColor}`}>{product.data.tag}</span>
            <h2 class="store-card__title">{product.data.title}</h2>
            <p class="store-card__description">{product.data.description}</p>
            <span class="store-card__price">{product.data.price}</span>
          </div>
        </a>
      ))}
    </section>

  </div>

  <!-- Structured data -->
  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "ItemList",
    "name": "Herramientas de Notion",
    "description": "Herramientas y sistemas construidos en Notion para mejorar tu productividad.",
    "url": "https://aprendenotion.com/herramientas",
    "numberOfItems": products.length,
    "itemListElement": products.map((p, i) => ({
      "@type": "ListItem",
      "position": i + 1,
      "url": `https://aprendenotion.com/herramientas/${p.id}`
    }))
  })} />
</BaseLayout>
