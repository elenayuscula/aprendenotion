---
import LessonLayout from '../layouts/LessonLayout.astro';

const toc = [
  { label: '¬øPara qu√© sirve relacionar bases de datos?', href: '#para-que-sirve' },
  { label: '¬øC√≥mo se crea una relaci√≥n?', href: '#como-crear' },
  { label: 'Las p√°ginas relacionadas', href: '#paginas-relacionadas' },
  { label: 'Relacionar una base de datos consigo misma', href: '#relacionar-consigo-misma' },
  { label: 'Tareas relacionadas', href: '#tareas-relacionadas' },
  { label: 'Subtareas de tareas', href: '#subtareas' },
];
---

<LessonLayout
  title="4.01. La propiedad Relation ‚Äî Aprende Notion"
  description="Aprende a usar la propiedad Relation en Notion para conectar bases de datos entre s√≠ y organizar tu informaci√≥n de forma eficiente."
  emoji="üï∏Ô∏è"
  lessonTitle='4.01. La propiedad "Relation"'
  prevLink={{ href: '/relations-rollups', label: 'üï∏Ô∏è 4. Relations & Rollups' }}
  nextLink={{ href: '/recetas', label: 'Pr√°ctica 01. Crear un repositorio de recetas' }}
  toc={toc}
>
  <div class="video-embed">
    <iframe src="https://www.youtube.com/embed/FBCc7EUTKik" title="La propiedad Relation en Notion" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
  </div>

  <h2 id="para-que-sirve">¬øPara qu√© sirve relacionar unas bases de datos con otras?</h2>
  <p>Piensa por ejemplo que tienes una lista de clientes y una lista de proyectos, y quieres saber qu√© proyectos corresponden a cada uno de esos clientes. Podr√≠as conectar tu base de datos de Clientes con la de Proyectos y de esta manera ambas estar√≠an relacionadas entre s√≠. Al entrar en el registro de uno de tus clientes, en sus propiedades ver√≠as todos los √≠tems de la base de datos de Proyectos asociados a ese cliente.</p>

  <h3>M√°s ejemplos de bases de datos relacionadas:</h3>
  <ul>
    <li>Una base de datos de <strong>Ingredientes</strong> conectada a una base de datos de <strong>Recetas</strong> para ver de qu√© ingredientes est√° compuesta cada receta.</li>
    <li>Una base de datos de <strong>Contactos</strong> relacionada con otra de <strong>Empresas</strong> para tener un control de d√≥nde trabajan cada uno.</li>
    <li>Una base de datos de <strong>Reuniones</strong> con una base de datos de <strong>Clientes</strong> para ver todas las reuniones con cada cliente.</li>
    <li>Una base de datos de <strong>Restaurantes</strong> conectada con otra de <strong>Barrios</strong>, para ver todos los restaurantes de un mismo barrio.</li>
  </ul>

  <p>Otra manera de pensar en esta propiedad es con el concepto de "Contenedor". La base de datos de clientes contiene proyectos. Los proyectos pueden a su vez contener tareas. Y estas agrupaciones pueden darse a lo largo de todo tu espacio de trabajo.</p>

  <div class="callout">
    <span class="callout__icon">üí°</span>
    <div class="callout__content">
      <p>Esta funcionalidad de agrupar y relacionar, combinada con los filtros que ya conocemos o con los Rollups que veremos m√°s adelante, nos abren un amplio mundo de posibilidades de manipulaci√≥n y organizaci√≥n dentro de las bases de datos de nuestro espacio de trabajo.</p>
    </div>
  </div>

  <h2 id="como-crear">¬øC√≥mo se crea una relaci√≥n entre bases de datos?</h2>
  <p>Para relacionar bases de datos necesitar√°s <strong>por lo menos dos bases de datos</strong>. En este caso vamos a relacionar una serie de tareas con sus proyectos.</p>

  <p><strong>Pasos para crear una relaci√≥n:</strong></p>
  <ul>
    <li>En la base de datos de <strong>Proyectos</strong>, crear√°s una nueva propiedad de tipo <code>Relation</code> a la que llamar√°s "Tareas".</li>
    <li>En el momento en que crees una propiedad del tipo <code>Relation</code>, se te abrir√° un mensaje pregunt√°ndote a qu√© base de datos quieres enlazar dicha propiedad. Aqu√≠ es donde tienes que elegir la base de datos que quieres que est√© conectada. En este caso, <strong>Tareas</strong>.</li>
    <li>Al crear esta relaci√≥n, autom√°ticamente se crea una propiedad nueva en tu base de datos de <strong>Tareas</strong>, que pondr√° algo parecido a <code>Related to Proyectos (Tareas)</code>. Cambia el nombre de esta columna a uno m√°s descriptivo (por ejemplo, <strong>Proyectos</strong>).</li>
  </ul>

  <p>A partir de ahora, ambas tablas est√°n relacionadas. Para empezar a crear esos enlaces entre ellas, es tan sencillo como pinchar en una de las columnas con la propiedad <code>Relation</code> y seleccionar el √≠tem de la otra base de datos que quieres relacionar.</p>
  <p>Seg√∫n vayas seleccionando <strong>Tareas</strong> (con el bot√≥n de <code>+</code>), ver√°s que van apareciendo en su columna correspondiente y, adem√°s, como la sincronizaci√≥n funciona en ambas direcciones, ver√°s que en la base de datos de <strong>Tareas</strong> ahora tambi√©n indica a qu√© proyecto pertenecen.</p>

  <img src="/images/leccion-04/relations/crear-relation.gif" alt="C√≥mo crear una relaci√≥n entre bases de datos en Notion" />

  <h2 id="paginas-relacionadas">Las p√°ginas relacionadas</h2>
  <p>Cuando creas una relaci√≥n entre dos bases de datos, lo que est√°s haciendo es a√±adir las p√°ginas que formaban una de las bases de datos a una de las propiedades de la otra. Desde tu base de datos de <strong>Proyectos</strong>, adem√°s de todas las propiedades, ahora tambi√©n podr√°s ver todas las p√°ginas que est√°n relacionadas con ella.</p>
  <p>Puesto que cada registro en una base de datos es a su vez una p√°gina, podr√°s abrir esas tareas como p√°ginas normales y llenarlas con el contenido que necesites.</p>

  <img src="/images/leccion-04/relations/abrir-pagina-relacionada.gif" alt="Abrir p√°ginas relacionadas en Notion" />

  <div class="video-embed">
    <iframe src="https://www.youtube.com/embed/PmPDB5BnnOE" title="Relacionar bases de datos consigo mismas en Notion" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
  </div>

  <h2 id="relacionar-consigo-misma">Relacionar una base de datos consigo misma</h2>
  <p>En ocasiones, puede que quieras que los items de una misma base de datos est√©n relacionados consigo mismos. En Notion, cuando haces esto, puedes elegir c√≥mo quieres que sea esta relaci√≥n:</p>
  <ul>
    <li><strong>Como tareas relacionadas</strong> (<code>No syncing</code>): Se crea solo la propiedad de <code>Relation</code> que hayas elegido.</li>
    <li><strong>Como subtareas de tareas</strong> (<code>Sync both ways</code>): Se crear√°n autom√°ticamente dos columnas, una para tareas padre y otra para subtareas.</li>
  </ul>

  <img src="/images/leccion-04/relations/relacionar-consigo-misma.webp" alt="Relacionar una base de datos consigo misma en Notion" />

  <h2 id="tareas-relacionadas">Tareas relacionadas (la opci√≥n f√°cil)</h2>
  <p>Si eliges esta opci√≥n, s√≥lo crea una columna. Al relacionar una tarea con otra, simplemente ver√°s al lado de la primera tarea la tarea con la que la has relacionado.</p>
  <p>El problema es que desde la segunda tarea no puedes ver que est√° relacionada con la primera. Para eso existe la segunda opci√≥n.</p>

  <img src="/images/leccion-04/relations/tareas-relacionadas.gif" alt="Tareas relacionadas en Notion" />

  <h2 id="subtareas">Subtareas de tareas (o Tareas Padre y Tareas Hijo)</h2>
  <p>Al elegir la opci√≥n de <code>Sync Both Ways</code> se crean dos columnas adicionales autom√°ticamente. El uso m√°s com√∫n es saber qu√© tareas est√°n compuestas de subtareas m√°s peque√±as.</p>
  <p>Al relacionar la base de datos de <strong>Tareas</strong> consigo misma con esta opci√≥n, podr√°s ver las subtareas de una tarea y, a su vez, las tareas padre de estas subtareas.</p>

  <img src="/images/leccion-04/relations/tareas-y-subtareas.webp" alt="Tareas y subtareas en Notion" />

  <div class="callout">
    <span class="callout__icon">‚òùüèª</span>
    <div class="callout__content">
      <p><strong>Tip:</strong> Si vas a usar esta funcionalidad para gestionar subtareas:</p>
      <ol>
        <li>Marca las subtareas con una pista visual al comienzo (por ejemplo <strong>‚Üí</strong>)</li>
        <li>Esconde la propiedad de "Tarea Padre" para s√≥lo ver las subtareas</li>
        <li>Filtra la tabla para que s√≥lo muestre registros cuya propiedad "Subtarea" tenga algo dentro (<code>Subtarea</code> + <code>Is not Empty</code>)</li>
      </ol>
  <img src="/images/leccion-04/relations/subtareas-optimizada.webp" alt="Subtareas optimizadas en Notion" />
    </div>
  </div>
</LessonLayout>
