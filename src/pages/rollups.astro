---
import LessonLayout from '../layouts/LessonLayout.astro';

const toc = [
  { label: 'Introducci√≥n', href: '#introduccion' },
  { label: 'C√≥mo crear un rollup', href: '#como-crear' },
  { label: 'Tipos de rollup', href: '#tipos' },
  { label: 'Hacer operaciones con rollups', href: '#operaciones' },
];
---

<LessonLayout
  title="4.02. La propiedad Rollup ‚Äî Aprende Notion"
  description="Aprende a usar la propiedad Rollup en Notion para extraer y operar con datos de bases de datos relacionadas."
  emoji="üï∏Ô∏è"
  lessonTitle='4.02. La propiedad "Rollup"'
  prevLink={{ href: '/recetas', label: 'Pr√°ctica 01. Crear un repositorio de recetas' }}
  nextLink={{ href: '/control-gastos', label: 'Pr√°ctica 02. Crear una tabla de control de gastos' }}
  toc={toc}
>
  <div class="video-embed">
    <iframe src="https://www.youtube.com/embed/e6Re1I0p46I" title="La propiedad Rollup en Notion" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
  </div>

  <h2 id="introduccion">Introducci√≥n</h2>
  <p>La propiedad <code>Rollup</code> es una propiedad dependiente de la de <code>Relation</code>. No se puede crear ning√∫n Rollup sin tener previamente una relaci√≥n creada con otra base de datos. La finalidad de la propiedad Rollup es "extraer" los datos de las bases de datos relacionadas y operar con ellos.</p>
  <p>Continuando con el ejemplo de <strong>Proyectos</strong> y <strong>Tareas</strong>, creando una propiedad Rollup en la base de datos de Proyectos que "llamara" a las propiedades de la base de datos de Tareas, se podr√≠a ver cu√°ntas tareas se tienen en total, o cu√°ntas han sido completadas.</p>

  <h2 id="como-crear">C√≥mo crear un rollup</h2>
  <p>Lo primero para que un Rollup funcione es que exista una propiedad <code>Relation</code> creada. En el ejemplo, ya existe la base de datos de <strong>Tareas</strong> relacionada con <strong>Proyectos</strong>, as√≠ que se crea una nueva propiedad del tipo <code>Rollup</code>.</p>

  <p>Una vez creada la propiedad, al pinchar en la columna correspondiente, se abre un men√∫ con tres desplegables:</p>
  <ul>
    <li><strong><code>Relation</code></strong>: Selecciona de cu√°l de las propiedades relacionadas quieres extraer la informaci√≥n.</li>
    <li><strong><code>Property</code></strong>: Elige de qu√© propiedad quieres usar los datos para realizar la operaci√≥n.</li>
    <li><strong><code>Calculate</code></strong>: La operaci√≥n que quieres hacer con esos datos extra√≠dos.</li>
  </ul>

  <img src="/images/leccion-04/rollups/crear-rollup.webp" alt="C√≥mo crear un rollup en Notion" />

  <h2 id="tipos">Tipos de rollup</h2>

  <h3>Operaciones generales:</h3>
  <ul>
    <li><strong><code>Show Original</code></strong>: Muestra las p√°ginas relacionadas. Marca esta opci√≥n para ver lo mismo que el indicador de la propiedad Relation.</li>
    <li><strong><code>Count All</code></strong>: Cuenta todos los √≠tems que hay en esa propiedad.</li>
    <li><strong><code>Count Unique Values</code></strong>: Cuenta solo el n√∫mero de √≠tems √∫nicos.</li>
    <li><strong><code>Count Empty</code></strong>: Cuenta el n√∫mero de p√°ginas relacionadas cuyo valor est√° vac√≠o.</li>
    <li><strong><code>Count Not Empty</code></strong>: Cuenta las p√°ginas que tienen un valor en ese campo.</li>
    <li><strong><code>Percent Empty</code></strong>: Igual que Count Empty pero muestra un porcentaje.</li>
    <li><strong><code>Percent Not Empty</code></strong>: Igual que Count Not Empty pero muestra un porcentaje.</li>
  </ul>

  <h3>Operaciones para propiedades num√©ricas:</h3>
  <p>Solo disponibles si la operaci√≥n es sobre una propiedad de tipo <code>Number</code>:</p>
  <ul>
    <li><strong><code>Sum</code></strong>: Suma el valor de las propiedades num√©ricas de las p√°ginas relacionadas.</li>
    <li><strong><code>Average</code></strong>: Saca la media.</li>
    <li><strong><code>Median</code></strong>: Encuentra la mediana.</li>
    <li><strong><code>Min</code></strong>: Muestra el n√∫mero m√°s peque√±o.</li>
    <li><strong><code>Max</code></strong>: Muestra el n√∫mero m√°s alto.</li>
    <li><strong><code>Range</code></strong>: Muestra el rango entre el m√°s alto y el m√°s bajo.</li>
  </ul>

  <h3>Operaciones para propiedades de fecha:</h3>
  <p>Solo aparecer√°n cuando act√∫es sobre propiedades de tipo <code>Date</code>:</p>
  <ul>
    <li><strong><code>Earliest Date</code></strong>: Muestra la fecha m√°s temprana.</li>
    <li><strong><code>Latest Date</code></strong>: Muestra la √∫ltima fecha.</li>
    <li><strong><code>Date Range</code></strong>: Muestra el rango de fechas (n√∫mero de d√≠as) entre la m√°s temprana y la √∫ltima.</li>
  </ul>

  <h2 id="operaciones">Hacer operaciones con rollups</h2>
  <p>Al igual que Notion permite hacer operaciones directamente en las bases de datos sin necesidad de la propiedad Formula, se puede hacer exactamente lo mismo con los rollups.</p>
  <img src="/images/leccion-04/rollups/rollups-progreso.webp" alt="Progreso con rollups en Notion" />

  <p>Esta funcionalidad solo se puede usar en bases de datos de tipo Tabla y Tablero, y se "activa" pasando el rat√≥n por encima del final de la columna (en Tablas) o por encima del n√∫mero gris (en Tableros).</p>
</LessonLayout>
